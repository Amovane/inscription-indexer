datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

generator client {
    // Corresponds to the cargo alias created earlier
    provider = "cargo prisma"
    // The location to generate the client. Is relative to the position of the schema
    output   = "../src/prisma.rs"
}

enum Chain {
    ETHEREUM_MAINNET
    BNBCHAIN_MAINNET
    OPBNB_MAINNET
}

enum IndexedType {
    OrdinalsTextPlain
}

model Inscription {
    id        String     @id
    chain     Chain
    block     BigInt
    deployer  String
    p         String
    tick      String
    max       String
    lim       String
    inscribes Inscribe[]

    @@unique([chain, p, tick])
    @@map("inscriptions")
}

model Inscribe {
    id             String      @id
    inscription    Inscription @relation(fields: [inscription_id], references: [id])
    inscription_id String
    block          BigInt
    amt            String

    @@map("inscribes")
}

model IndexedBlock {
    chain         Chain
    indexed_type  IndexedType
    indexed_block BigInt
    indexed_txi   BigInt

    @@unique([chain, indexed_type])
    @@map("indexed_blocks")
}
